#pragma
#include "map.h"
extern int fire_count;
extern int coin_count;
Map::Map() {

}

void Map::Map_all(int target[ROW][COL], int type) {//构造函数，初始化地图，其他函数需要声明后调用
    // 0: 地板 1: 墙 2: 终点
    int temp_org[ROW][COL] = {//原始地图数据
    {1 ,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,10,0,0,0,0,0,0,0,0,0,0,0,0,72,0,0,0,0,0,0,0,0,0,0,0,0,0,-35,1,0,101,21,0,102,22,0,103,23,1},//一道门
    {1 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1},//二道门
    {1, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
    {1,0 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-37,1,0,0,0,-38,41,0,0,0,0,1},
    {1,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},//三道门
    {1,0,0 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,-39,42,0,0,-40,43,0,0,1},
    {1,0,0,0 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-31,1,0,0,0,0,0,0,0,0,0,1},
    { 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    { 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    { 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,31,0,0,0,32,0,1},
    { 1,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    };
    //bfs系列关卡
    int temp_bfs1[ROW][COL] = { //bfs16 10
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,-32,1,0,0,0,0,0,1,0,0,0,0,1},//notice
    {1,0,1,0,1,0,1,1,1,0,1,0,1,1,0,1},
    {1,0,1,0,0,0,0,1,1,0,1,0,0,1,0,1},
    {1,0,1,1,1,1,0,1,1,0,1,1,0,1,0,1},
    {1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1},
    {1,1,1,1,1,1,1,0,1,1,1,1,0,1,0,1},
    {1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,1},
    {1,0,1,1,1,0,1,1,1,1,1,1,1,1,9,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1} };
    int temp_bfs2[ROW][COL] = {//bfs2 15*11
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1} ,
    {1, 0, 0, -33, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1},//notice
    {1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1 },
    {1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1},
    {1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1},
    {1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 9, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}};
    int temp_bfs3[ROW][COL]= {//bfs3 30*20
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1},
    {1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,1,0,1,1,1,0,1},
    {1,0,1,0,-34,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,1,0,0,0,1,0,1},
    {1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,0,1},
    {1,0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1},
    {1,0,1,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,1,1,0,1,0,1,0,1},
    {1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1},
    {1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1},
    {1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1},
    {1,1,1,0,1,1,1,1,1,0,1,0,1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1},
    {1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1},
    {1,0,1,1,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1},
    {1,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1},
    {1,0,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1},
    {1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1},
    {1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
    };
    int temp_transport[ROW][COL] = {
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    { 1,0,-41,0,65,1,0,0,66,0,1,1,66,1,0,3,3,1,1,1,1,67,0,1,0,0,0,0,0,0,68,1,1,1,68,0,0,3,1 },
    { 1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,3,0,0,3,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1 },
    { 1,1,1,1,1,1,1,1,1,1,0,3,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,3,0,0,0,1,0,0,69,1,1,1 },
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,67,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1 },
    { 1,1,65,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,3,0,0,0,0,0,1,1,1,1,1 },
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1 },
    { 1,1,1,1,0,0,0,3,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,3,0,0,0,1,1,1,1,1,1,0,3,1,1,1,1 },
    { 1,1,1,69,0,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,1,1,1,1 },
    { 1,1,1,1,0,1,1,1,0,0,0,0,0,1,0,0,1,1,0,1,1,1,1,1,1,1,0,0,71,1,1,0,0,0,0,0,0,3,1 },
    { 1,1,1,1,0,3,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1 },
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1 },
    { 1,1,1,1,1,3,0,3,0,0,0,3,0,0,71,0,0,0,0,3,0,0,3,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,1 },
    { 1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,-2,1 },
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }
    };
    //贪心系列，
    //5,6,7分别为教程，normal,hard
    int temp_greedy_tech[ROW][COL] = {//30*15
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
    };
    int temp_greedy_normal[ROW][COL] = {
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
    };
    int temp_greedy_hard[ROW][COL] = {
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
    };
   /* if (type == 0) {
        memcpy(target, temp_org, sizeof(temp_org));
    }
    else if (type == 1) {
        memcpy(target, temp_bfs1, sizeof(temp_bfs1));
    }*/
    //根据type选择相应的地图
    switch (type) {
    case 0:
        memcpy(target, temp_org, sizeof(temp_org));
        break;
    case 1:
        memcpy(target, temp_bfs1, sizeof(temp_bfs1));
        break;
    case 2:
        memcpy(target, temp_bfs2, sizeof(temp_bfs2));
        break;
    case 3:
        memcpy(target, temp_bfs3, sizeof(temp_bfs3));
        break;
    case 4:
        memcpy(target, temp_transport, sizeof(temp_transport));
		break;
    case 5:memcpy(target, temp_greedy_tech, sizeof(temp_greedy_tech));
		break;
    case 6:memcpy(target, temp_greedy_tech, sizeof(temp_greedy_normal));
        break;
    case 7:memcpy(target, temp_greedy_hard, sizeof(temp_greedy_hard));
        break;
    }
}


void Map::load(int map[ROW][COL]) {
    loadimage(&floor, L"asset\\floor9.jpg",32,32);
    loadimage(&wall, L"asset\\wall2.png",32,32);
    loadimage(&goal, L"asset/goal.png",32,32);
	loadimage(&envent, L"asset/envent.png", 32, 32);
    loadimage(&exit, L"asset/exit.png", 32, 32);
	loadimage(&coin, L"asset/coin.png", 96, 96);
    loadimage(&notice, L"asset/notice.png", 32, 32);
    loadimage(&trans, L"asset/trans.png", 28, 32);
    loadimage(&box, L"asset/box.png", 32, 32);
    loadimage(&readme, L"asset/readme.png", 32, 32);
	loadimage(&fire, L"asset/fire.png", 256, 32);
}

void Map::draw(int map[ROW][COL]) {
    for (int i = 0; i < ROW; ++i) {
        for (int j = 0; j < COL; ++j) {
            int x = j * TILE_SIZE;
            int y = i * TILE_SIZE;
            switch (map[i][j]) {
            case 0: putimage(x, y, &floor); break;
            case 1: putimage(x, y, &wall); break;
            case 2:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &goal, 0, 0); break;
            case 3:putimage(x, y, &floor); {
                coin_count = coin_count % 9;
                switch (coin_count) {
                case 0:putimage_alpha_clip(x, y, 32, 32, &coin, 0, 0); break;
                case 1:putimage_alpha_clip(x, y, 32, 32, &coin, 32, 0); break;
                case 2:putimage_alpha_clip(x, y, 32, 32, &coin, 64, 0); break;
                case 3:putimage_alpha_clip(x, y, 32, 32, &coin, 0, 32); break;
                case 4:putimage_alpha_clip(x, y, 32, 32, &coin, 32, 32); break;
                case 5:putimage_alpha_clip(x, y, 32, 32, &coin, 64, 32); break;
                case 6:putimage_alpha_clip(x, y, 32, 32, &coin, 0, 64); break;
                case 7:putimage_alpha_clip(x, y, 32, 32, &coin, 32, 64); break;
                case 8:putimage_alpha_clip(x, y, 32, 32, &coin, 64, 64); break;
                }
               /* coin_count++;*/
            }
            break; // 硬币
            case 10:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &readme, 0, 0); break;//readme
            case 9:
			case 21:
            case 22:
            case 23:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &goal, 0, 0); break;
            case 41:
            case 42:
            case 43:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &goal, 0, 0); break;//贪心传送门
			case 31:putimage(x, y, &floor);putimage_alpha_clip(x, y, 32,32,&envent,0,0); break;
            case 32:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &envent, 0, 0); break;//奇遇
            case -1:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &exit, 0, 0); break;
			case -2:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &exit, 0, 0); break;
			case -31://奇遇告示板
			case -35://bfs告示板
			case -32:
			case -33:
            case -36:
            case -37://贪心告示板
            case -38:
            case -39:
			case -40://背包告示板
			case -41://传送知识点告示板
			case -34:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &notice, 0, 0); break;//bfs3通知
            case 65:
            case 66:
            case 67:
            case 68:
            case 69:
            case 71: { 
                putimage(x, y, &floor); 
                putimage_alpha_clip(x, y, 28, 32, &trans, 0, 0);
                break;//传送门
            }
            case 72: {
                putimage(x, y, &floor);
				fire_count = fire_count % 16;
                switch (fire_count) {
                case 0:putimage_alpha_clip(x, y, 32,32, &fire, 0, 0); break;
                case 1:putimage_alpha_clip(x, y, 32, 32, &fire, 0, 0); break;
                case 2:putimage_alpha_clip(x, y, 32, 32,&fire, 32, 0); break;
                case 3:putimage_alpha_clip(x, y, 32, 32, &fire, 32, 0); break;
                case 4:putimage_alpha_clip(x, y, 32, 32, &fire, 64, 0); break;
                case 5:putimage_alpha_clip(x, y, 32, 32, &fire, 64, 0); break;
                case 6:putimage_alpha_clip(x, y, 32, 32, &fire, 96, 0); break;
                case 7:putimage_alpha_clip(x, y, 32, 32, &fire, 96, 0); break;
                case 8:putimage_alpha_clip(x, y, 32, 32, &fire, 128, 0); break;
                case 9:putimage_alpha_clip(x, y, 32, 32, &fire, 128, 0); break;
                case 10:putimage_alpha_clip(x, y, 32, 32, &fire, 160, 0); break;
                case 11:putimage_alpha_clip(x, y, 32, 32, &fire, 160, 0); break;
                case 12:putimage_alpha_clip(x, y, 32, 32, &fire, 192, 0); break;
                case 13:putimage_alpha_clip(x, y, 32, 32, &fire, 192, 0); break;
                case 14:putimage_alpha_clip(x, y, 32, 32, &fire, 224, 0); break;
                case 15:putimage_alpha_clip(x, y, 32, 32, &fire, 224, 0); break;
                }
				break;//火焰陷阱
            }
            case 100:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &notice, 0, 0); break;//reamde notice
            case 101:
            case 102:
            case 103:putimage(x, y, &floor); putimage_alpha_clip(x, y, 32, 32, &box, 0, 0); break;//数据箱
            }
        }
    }
}


bool Map::isWalkable(int px, int py, int map[ROW][COL]) {
    int col = px / TILE_SIZE;
    int row = py / TILE_SIZE;
    if (map[row][col]==1) return false;
    return map[row][col] != 1;
}
